# 环境配置

服务器系统 Ubuntu 20.04 Server

## 配置 docker

### 安装 docker

doker hub

```
$ sudo docker pull mysql:5.7
```

### 安装 mysql

创建一个文件夹 mysqldata 文件夹的结构

```
mysqldata$ tree
.
├── config
├── data
└── log
```

启动 mysql 容器

```bash
$ docker run -p 3307:3306 --name mysqldocker \
-v /home/yanghao/docments/mysqldata/log:/var/log/mysql \ # 目录挂载
-v /home/yanghao/docments/mysqldata/data:/var/lib/mysql \
-v /home/yanghao/docments/mysqldata/config:/etc/mysql \
-e MYSQL_ROOT_PASSWORD=root \
-d mysql:5.7
```

进入 mysql 容器看一下都有什么

```bash
root@server:/home/yanghao# docker ps
CONTAINER ID   IMAGE       COMMAND                  CREATED         STATUS         PORTS                                                  NAMES
474097c44b8e   mysql:5.7   "docker-entrypoint.s…"   5 minutes ago   Up 5 minutes   33060/tcp, 0.0.0.0:3307->3306/tcp, :::3307->3306/tcp   mysqldocker
root@server:/home/yanghao# docker exec -it 474 /bin/bash # 474 这里可以填容器的 名字或者 id （id 只要填前面几位保证和别的不一样就可以了）
root@474097c44b8e:/# ls
bin  boot  dev  docker-entrypoint-initdb.d  entrypoint.sh  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
# 你会发现 mysql 容器就是一个小小的 liunx 
root@474097c44b8e:/# whereis mysql
mysql: /usr/bin/mysql /usr/lib/mysql /etc/mysql /usr/share/mysql
# 在这个小小的 liunx 中装了 mysql
$ exit # 退出容器
```

修改 mysql 配置

```bash
[client]
default-character-set=utf8

[mysql]
default-character-set=utf8

[mysqld]
init_connect='SET collation_connection = utf8_unicode_ci'
init_connect='SET NAMES utf8'
character-set-server=utf8
collation-server=utf8_unicode_ci
skip-character-set-client-handshake
skip-name-resolve
```

重启 mysql 容器

```bash
$ docker restart 容器id or 名字
```

### 安装配置 redis

**安装**

```
$ docker search redis # 搜索 docker hub 上 redis 镜像
$ docker pull redis:版本号号
```

**启动容器**

```bash
# 创建一个文件夹 redisdata 目录结构和创建文件 redis.conf
root@server:/home/yanghao/docments/redisdata # tree
.
├── conf
│   └── redis.conf
└── data
$ touch /home/yanghao/docments/redisdata/redis/conf/redis.conf
$ docker run -p 6379:6379 --name redis \
-v /home/yanghao/docments/redisdata/data:/data \
-v /home/yanghao/docments/redisdata/conf/redis.conf:/etc/redis/redis.conf \
-d redis redis-server /etc/redis/redis.conf # redis 容器名或者容器id redis-server redis 启动参数 以后面那个配置文件启动
```

**进入 redis 容器**

```bash
$ sudo docker exec -it redis redis-cli # 进入容器中 redis 的客户端
$ docker exec -it redis /bin/bash # 进入 redis 容器
127.0.0.1:6379> exit # 退出
```

**修改配置**

为了能长久存储数据，我们需要修改 redis.conf 文件

```bash
$ vim redis.conf
-> appendonly yes
```

## 配置开发环境

```bash
$ sudo apt install openjdk-8-jdk
```

## 配置 maven

**下载安装**

```
$ wget https://archive.apache.org/dist/maven/maven-3/3.6.1/binaries/apache-maven-3.6.1-bin.tar.gz
$ sudo tar -zxvf apache-maven-3.6.1-bin.tar.gz -C /usr/local/bin/
```

