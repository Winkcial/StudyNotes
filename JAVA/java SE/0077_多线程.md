# 多线程

## 基本概念：程序、线程和进程

程序（program）：是一段代码，一段静态的指令集合。

进程（process）:程序的一次运行过程，正在执行的程序。它会产生、存在和消亡，是具有自己的生命周期。
- 程序是静态的、进程是动态的
- **进程作为资源分配的单位**，系统在运行时会为每个进程分配不同的内存区域。

线程（thread）：进程可以进一步细化为线程。线程是一个程序内部的一条执行路径。

- 如果一个进程支持多个线程一起执行，就叫做**多线程**
- **线程作为调度和执行的单位，每一个线程都有独立的运行栈和程序计数器（pc）**,线程切换的开销小


**单核 CPU 和 多核 CPU** 

- 单核 CPU 是一种假的多线程，因为在一个时间单元内，只能执行一个线程，只不过切换的时间短，人察觉不到。
- 一个 java 程序至少是三个线程，main() 主线程、gc() 垃圾回收线程和异常处理线程。

**并行与并发**

- 并行：多个 CPU 执行多个任务
- 并发：一个 CPU 执行多个任务

## 使用多线程优点

- 提高应用响应时间，增强用户的应用的使用体验
- 提高 CPU 使用效率
- 改善程序结构，将复杂的进程改成多个线程，独立运行，便于理解。

## 何时使用多线程

- 程序需要执行多个任务
- 程序需要执行等待任务时，如用户的输入、文件读写
- 需要后台运行的操作


