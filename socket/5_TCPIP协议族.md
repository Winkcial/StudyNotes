# TCP/IP

## 1. TCP/IP协议族

上节中讲到，目前实际使用的网络模型是 TCP/IP 模型，它对 OSI 模型进行了简化，只包含了四层，从上到下分别是应用层、传输层、网络层和链路层（网络接口层），每一层都包含了若干协议。

协议（Protocol）就是网络通信过程中的约定或者合同，通信的双方必须都遵守才能正常收发数据。协议有很多种，例如 TCP、UDP、IP 等，通信的双方必须使用同一协议才能通信。协议是一种规范，由计算机组织制定，规定了很多细节，例如，如何建立连接，如何相互识别等。

> 协议仅仅是一种规范，必须由计算机软件来实现。例如 IP 协议规定了如何找到目标计算机，那么各个开发商在开发自己的软件时就必须遵守该协议，不能另起炉灶。

TCP/IP 模型包含了 TCP、IP、UDP、Telnet、FTP、SMTP 等上百个互为关联的协议，其中 TCP 和 IP 是最常用的两种底层协议，所以把它们统称为“TCP/IP 协议族”。

也就是说，“TCP/IP模型”中所涉及到的协议称为“TCP/IP协议族”，你可以区分这两个概念，也可以认为它们是等价的，随便你怎么想。

本教程所讲的 socket 编程是基于 TCP 和 UDP 协议的，它们的层级关系如下图所示：

![1][no.1]

## 2. 【扩展阅读】开放式系统（Open System）

把协议分成多个层次有哪些优点？协议设计更容易？当然这也足以成为优点之一。**但是还有更重要的原因，就是为了通过标准化操作设计成开放式系统。**

标准本身就是对外公开的，会引导更多的人遵守规范。以多个标准为依据设计的系统称为开放式系统（Open System），我们现在学习的 TCP/IP 协议族也属于其中之一。

接下来了解一下开放式系统具有哪些优点。

路由器用来完成 IP 层的交互任务。某个网络原来使用 A 公司的路由器，现要将其替换成 B 公司的，是否可行？这并非难事，并不一定要换成同一公司的同一型号路由器，因为所有生产商都会按照 IP 层标准制造。

再举个例子。大家的计算机是否装有网络接口卡，也就是所谓的网卡？尚未安装也无妨，其实很容易买到，因为所有网卡制造商都会遵守链路层的协议标准。这就是开放式系统的优点。

标准的存在意味着高速的技术发展，这也是开放式系统设计最大的原因所在。实际上，软件工程中的“面向对象（Object Oriented）”的诞生背景中也有标准化的影子。也就是说，标准对于技术发展起着举足轻重的作用。

## image link

[no.1]:data:image/png;base64,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

