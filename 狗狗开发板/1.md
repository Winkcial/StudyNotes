找 GPIO 文件

系统开机后 /sys/class/gpio 目录下就只有默认的几个文件目录，BBB 板 总共一百多个可用的 GPIO 端口并没有一个一个罗列出来，Linux 下控制 IO 口就 是读写 IO 文件，所以首先得把相应的 GPIO 文件找出来，其实就是通过 echo 命 令把需要控制的 GPIO 端口设置为可用状态，/sys/class/gpio 目录下就可以显 示出相关文件了（简单理解就是原来端口控制文件隐身了，通过 echo 命令把它 显示出来）

\4. 实验内容

 1．熟悉在嵌入式开发环境下完成如下操作：

 1）/root 下建立两个目录，分别为 led 和 ADC；

 2）编写一简单 c 语言程序，调试运行。 

3）学会在开发板 linux 环境下使用 gcc 调试 C 程序。

 2．熟悉 Beaglebone Black 的数字及模拟端口，按照实验步骤完成 Shell 命 令、Shell 脚本编程读取数字及模拟端口

 3.程序基本要求： 

1）BBB 数字端口实验-LED 控制实验:编程（不限语言）实现 P8.12 和 P8.11 两引脚控制 led 灯交替闪亮。

 2）BBB 模拟端口实验-读取 ADC 数据: 加载 ADC 设备, 编程实现 ADC 数据读 取

 3）与外部世界的交互-传感器: 编程实现实时温度数据的采集

 4、基于 BBB 的物联网通信架构实现

 1） BeagleBone Black 作为 web 服务器：学会配置 Apache 服务器，编写、 运行简单 CGI 脚本

 2） BeagleBone B

## 连接互联网

1）安装驱动设置网络适配器

2）配置 BBB 路由器所有流量走 usb0 网关

```shell
$ route add default gw 192.168.7.1 
```

3）查看路由设置

```shell
$ route
```

4）配置域名解析

```shell
$ vim /etc/resolv.conf # 添加以下内容
->
nameserver 8.8.8.8
nameserver 127.0.0.1
```

 电阻作用： 减小负载端电流，例如在发光二极管一端添加一个限流电阻可以减小流过发光二极管的电流，防止损坏LED灯。



## 点亮 led 灯

```shell
# 首先进入 gpio，通过 cd/sys/class/gpio/，先添加 gpio44。
$ cd /sys/class/gpio
$ echo 44 > export
$ cd gpio44
$ ls -l
# 其中“direction”是设置端口为输入 in 或输出 out 的文件（参数）（其实就是电流方向）；“value” 
# 就是端口值 0 或 1（低电平或高电平），直接读写这两个文件就可以了。
$ cat direction
$ echo out > direction
$ cat value
$ echo 1 >value # 灯亮
$ echo 0 >value # 灯灭
```

### 编写 shell 脚本控制 led 灯

```shell
!#bash

```

##  读取 ADC 信号





- /sys/devices/platform/bone_capemgr 加载 ADC 设备树的目录，有些版本可 能为/sys/devices/bone_capemgr.8 或其他数字，具体根据自己的板来做；

- /sys/bus/iio/devices/ 这个目录是 ADC 设备加载后的设备数据目录，读 取 ADC 数据就是在这主目录下进行的；打开这两个目录，用 ls –all 命令 查看下缺省状态下都有什么文件，

设置环境变量

```shell
$ export SLOTS=/sys/devices/platform/bone_capemgr/slots
$ cat $SLOTS
$ export PINS=/sys/kernel/debug/pinctrl/44e10800.pinmux/pins
$ cat $PINS
```

## Apache web

https://www.cnblogs.com/windlaughing/p/3153848.html



