# 模组开发

当你需要编辑材质文件（本游戏中要求的材质文件格式是.tex），推荐使用由Handsome Matt制作的TexTool。



当你需要编辑文件时，请使用支持透明背景的图像编辑器；如果你有闲钱，不妨买个Photoshop；如果你穷得响叮当，就只有试试 GIMP 这款免费软件。



最后推荐你从Steam下载一个Don't Starve Mod工具，操作步骤如下：



## 一个模组里都有什么

如上图所示，一个必须具有两个文件：

- modmain.lua：游戏载入你制作的mod所需要的文件；

- modinfo.lua：储存mod作者、版本等信息的文件。

### **modinfo.lua**

```lua
name = "myaxe" -- 模组名称
description = "cut down trees or mining" -- 模组简介
author = "lan"
version = "1.0.0" -- mod 的 版本
forumthread = ""
icon_atlas = "modicon.xml"
icon = "modicon.tex"
dont_starve_compatible = true -- 是否与单机版兼容
reign_of_giants_compatible = true -- 是否与  Reign of Giants 兼容
dst_compatible = true -- 是否与联机版兼容
all_clients_require_mod = true

-- this setting is dumb; this mod is likely compatible with all future versions
api_version = 10 -- mod对应的游戏API版本号
```



> 还可能有的选项
>
> restart_required = false -- 本mod是否需要重启生效
>
> standalone = false -- mod是否能够兼容其他mod

### **modmain.lua**

　　Never Perish Icebox这个mod的modmain.lua中只有一行代码

　　TUNING.PERISH_FRIDGE_MULT = 0;

　　它的作用是修改data\scripts\tuning.lua中TUNING对象的成员PERISH_FRIDGE_MULT，也就是修改游戏中Icebox的保鲜时间长度。

　　由此可见，要提供mod元信息，你就应该给modinfo.lua；而为了真正实现你的mod的功能，你则应该在modmain.lua 中编写代码。

## 模组的模板

首先从Klei论坛[forums.kleientertainment.com]或者创意工坊下载人物mod模版Extended Sample Character。以此为基础，修改模版中人物信息和脚本，你就可以制作出自己独家定制的mod了~

## 武器模组

首先确定武器名字，例：myaxe

所需要的图片有

- 放在装备栏里的图片

- 扔在地上图片

- 拿在手中的图片

部分图片的spriter以及不需要spriter的制作方法，但是我还是要说下不需要spriter的制作方法（替换很安逸）

我们下面制作拿在手中的图片

打开myaxe\exported\swap_myaxe 可以看到图片文件swap_myaxe-0, 替换掉myaxe 改成我们设定好的名字

用ps打开这个文件，删掉模板图片，将制作好的  武器拿在手中的图片 放入图层（替换图片不能改变图层的画布大小），保存好用notepad++或sublime打开swap_myaxe.scml，替换掉所有myaxe。

保证所有的myaxe都改成设定好的名字，ground_myaxe同理

记得打开游戏前先将anim文件夹下的压缩包删除（否则modtool不会帮你打包）

## 食物模组

## 人物模组

如下图所示，一个人物mod通常除了包括前面提到的 modinfo.lua 和 modmain.lua 以外，还包括

anim、bigportraits、exported、images 和 scripts 目录，以及 modicon.jpg、modicon.tex 和 modicon.xml 文件。

![](模组开发md.assets/Snipaste_2021-11-29_21-33-04.png)

## 参考文献

BuildRenamer 使用 http://tieba.baidu.com/p/2453027864

Spriter 使用 http://tieba.baidu.com/p/4378173135

TEXTool 使用  https://tieba.baidu.com/p/2389518224